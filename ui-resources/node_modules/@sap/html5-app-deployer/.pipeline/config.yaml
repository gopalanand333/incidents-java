general:
  buildTool: 'npm'
  productiveBranch: 'master'
  manualConfirmation: false
  whitesourceProductName: 'SHC - HTML5 APPS REPO CF 1.0'
  whitesourceProductToken: 'c072dce06000443c8dba7e48833f38805a1c30aefe174ad8bf6a633d3bccb7ee'
  userTokenCredentialsId: 'whitesource'
  customScanVersion: 'master'
  vaultNamespace: scp/teams/html5-approuter-team/html5apps
  vaultPath: kv
  vaultBasePath: kv
  vaultPipelineName: deployer
  vaultAppRoleTokenCredentialsId: piper-app-role
  vaultAppRoleSecretTokenCredentialsId: piper-app-role-secret
stages:
  'Pull-Request Voting':
    npmExecuteLint: true
    npmExecuteScripts: true
    sonarExecuteScan: true
  'Central Build':
    npmExecuteLint: true
    npmExecuteScripts: true
    sonarExecuteScan: true
  'Security':
    checkmarxExecuteScan: false
    checkmarxOneExecuteScan: true
    whitesourceExecuteScan: true
  'IPScan and PPMS':
    whitesourceExecuteScan: true
    sapCheckPPMSCompliance: true
  'Release':
    githubPublishRelease: false
  'Post Actions':
    vaultRotateSecretId: false
steps:
  npmExecuteLint:
    install: true
  npmExecuteScripts:
    defaultNpmRegistry: 'https://int.repositories.cloud.sap/artifactory/api/npm/build-releases-npm/'
    install: true
    virtualFrameBuffer: false
    runScripts:
      - 'test'    
  sapXmakeExecuteBuild:
    buildQuality: 'Milestone'
  checkmarxExecuteScan:  
    teamName: '\CxServer\SP\SAP\PI\CP\CFS\CloudFront\Approuter'
    preset: 'SAP_Corp_JavaScript_Server'
    projectName: 'HTML5 App Repo Deployer'
    generatePdfReport: true
  checkmarxOneExecuteScan: # notice that the step name changed
    projectName: 'HTML5 App Repo Deployer'
    branch: 'master' # optional
    applicationName: 'HTML5_APPLICATION_DEPLOYER' # the target application in CxONE
    preset: 'SAP_Corp_JavaScript_Server' # preset name, not preset ID
    checkmarxOneCredentialsId: 'html5_checkmarxOne' # the OAuth client ID and secret that you created in CxONE
    generatePdfReport: true
  sapCheckPPMSCompliance:
    ppmsID: '73554900100200007811'
    ppmsCredentialsId: 'ppmsCredentialsId'
    ppmsChangeRequestUpload: true
    whitesourceUserTokenCredentialsId: 'whitesource'
  sapCumulusUpload:
    pipelineId: ab262aa8-6961-473e-a5a0-1a3685237d9b
